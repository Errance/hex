# æœ¬åœ°åŒ–ç³»ç»Ÿé‡æ„æ–‡æ¡£

## ğŸ¯ æ ¸å¿ƒç†å¿µ

**åˆ†å±‚ç®¡ç†ï¼šUI æ–‡æ¡ˆ + æ˜“ç»å†…å®¹**

- **UI å±‚ï¼ˆi18nï¼‰**: æŒ‰é’®ã€æ ‡é¢˜ã€æç¤ºè¯­ â†’ CSV è¡¨æ ¼ç®¡ç†
- **å†…å®¹å±‚ï¼ˆçŸ¥è¯†åº“ï¼‰**: å¦è±¡ã€çˆ»è¾ã€è§£è¯» â†’ ç»“æ„åŒ– TS åŒè¯­å†…å®¹

## ğŸ“ æ–°æ¶æ„

```
src/
â”œâ”€â”€ lib/i18n/                    # UI æ–‡æ¡ˆå±‚
â”‚   â”œâ”€â”€ translations.csv         # ğŸ“ å”¯ä¸€ç¼–è¾‘çš„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â””â”€â”€ generate-i18n.ts    # CSV â†’ JSON + Types
â”‚   â”œâ”€â”€ generated/               # ğŸ¤– è‡ªåŠ¨ç”Ÿæˆï¼ˆä¸æ‰‹åŠ¨ç¼–è¾‘ï¼‰
â”‚   â”‚   â”œâ”€â”€ en/common.json
â”‚   â”‚   â”œâ”€â”€ zh/common.json
â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”œâ”€â”€ config.ts
â”‚   â””â”€â”€ useI18n.ts              # ç±»å‹å®‰å…¨çš„ hook
â”‚
â””â”€â”€ content/                     # æ˜“ç»å†…å®¹å±‚
    â”œâ”€â”€ types.ts
    â””â”€â”€ hexagrams.ts            # åŒè¯­å¦è±¡å†…å®¹
```

## ğŸ”„ å·¥ä½œæµç¨‹

### 1. ç¼–è¾‘ UI æ–‡æ¡ˆ

```bash
# ç¼–è¾‘ translations.csvï¼ˆExcel/Google Sheetsä¹Ÿå¯ï¼‰
vim src/lib/i18n/translations.csv

# ç¤ºä¾‹è¡Œï¼š
# key,en,zh,context,category
# app.title,Hex Oracle,æ˜“ç»å åœ,åº”ç”¨æ ‡é¢˜,general
# cast.cta,Begin Casting,å¼€å§‹å åœ,å åœæŒ‰é’®,casting
```

### 2. ç”Ÿæˆç¿»è¯‘æ–‡ä»¶

```bash
# æ‰‹åŠ¨ç”Ÿæˆ
npm run i18n:generate

# æˆ–è€…æ„å»ºæ—¶è‡ªåŠ¨ç”Ÿæˆï¼ˆå·²é…ç½® prebuildï¼‰
npm run build
```

### 3. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨

**UI æ–‡æ¡ˆï¼ˆç±»å‹å®‰å…¨ï¼‰ï¼š**
```typescript
import { useI18n } from "@/lib/i18n/useI18n";

function MyComponent() {
  const { t, lang } = useI18n();
  
  return (
    <div>
      <h1>{t("app.title")}</h1>  {/* âœ… è‡ªåŠ¨è¡¥å…¨ */}
      <p>{t("app.typo")}</p>     {/* âŒ TypeScript é”™è¯¯ */}
    </div>
  );
}
```

**æ˜“ç»å†…å®¹ï¼ˆåŒè¯­ç»“æ„ï¼‰ï¼š**
```typescript
import { getHexagramById } from "@/content/hexagrams";
import { useI18n } from "@/lib/i18n/useI18n";

function HexagramDisplay({ id }: { id: number }) {
  const { lang } = useI18n();
  const hex = getHexagramById(id);
  
  return (
    <div>
      <h2>{hex.name[lang]}</h2>
      <p>{hex.judgement[lang]}</p>
    </div>
  );
}
```

## âœ… ä¼˜åŠ¿

### UI æ–‡æ¡ˆï¼ˆCSV ç®¡ç†ï¼‰

1. **å¯è§†åŒ–å¯¹æ¯”**
   - ä¸€çœ¼çœ‹åˆ°æ‰€æœ‰ç¿»è¯‘
   - ä¸­è‹±æ–‡å¹¶æ’æ˜¾ç¤º
   - å®¹æ˜“å‘ç°ç¼ºå¤±

2. **åä½œå‹å¥½**
   - å¯ä»¥ç”¨ Excel/Google Sheets ç¼–è¾‘
   - å‘ç»™ç¿»è¯‘äººå‘˜
   - ä¸éœ€è¦æ‡‚ JSON/ä»£ç 

3. **ç±»å‹å®‰å…¨**
   - è‡ªåŠ¨ç”Ÿæˆ TypeScript ç±»å‹
   - IDE è‡ªåŠ¨è¡¥å…¨
   - é¿å…æ‹¼å†™é”™è¯¯

4. **ç‰ˆæœ¬æ§åˆ¶æ¸…æ™°**
   - CSV çš„ git diff æ¸…æ™°
   - æ˜“äº review

### æ˜“ç»å†…å®¹ï¼ˆç»“æ„åŒ– TSï¼‰

1. **é€‚åˆé•¿æ–‡æœ¬**
   - ä¸éœ€è¦ CSV è½¬ä¹‰
   - å¯ä»¥æ¢è¡Œã€æ ¼å¼åŒ–
   - æ”¯æŒæ³¨é‡Š

2. **åµŒå¥—ç»“æ„æ¸…æ™°**
   ```typescript
   {
     hexagram: {
       lines: [6ä¸ªçˆ»],
       scenes: { love, career, wealth }
     }
   }
   ```

3. **çŸ¥è¯†åº“å±æ€§**
   - å¯ä»¥å•ç‹¬æ¶¦è‰²
   - ä¸æ˜¯é€å¥ç¿»è¯‘å…³ç³»
   - AI prompt ç›´æ¥å¼•ç”¨

4. **Git diff å‹å¥½**
   - TS æ–‡ä»¶æŒ‰æ®µ diff
   - æ˜“äº review

## ğŸ“ å®Œæ•´ç¤ºä¾‹

### æ·»åŠ æ–°çš„ UI ç¿»è¯‘

**æ­¥éª¤ 1: ç¼–è¾‘ CSV**
```csv
reading.newFeature,New Feature,æ–°åŠŸèƒ½,New feature label,reading
reading.newCta,Try Now,ç«‹å³å°è¯•,CTA button,reading
```

**æ­¥éª¤ 2: ç”Ÿæˆ**
```bash
npm run i18n:generate
```

**æ­¥éª¤ 3: ä½¿ç”¨ï¼ˆè‡ªåŠ¨è¡¥å…¨ï¼ï¼‰**
```typescript
const { t } = useI18n();
<button>{t("reading.newFeature")}</button>  // âœ… è‡ªåŠ¨è¡¥å…¨
```

### æ·»åŠ æ–°å¦è±¡

**ç›´æ¥ç¼–è¾‘ hexagrams.ts:**
```typescript
{
  id: 4,
  name: {
    en: "MÄ“ng (Youthful Folly)",
    zh: "è’™ï¼ˆå¯è’™ï¼‰"
  },
  judgement: {
    en: "Youthful Folly has success...",
    zh: "è’™äº¨ã€‚åŒªæˆ‘æ±‚ç«¥è’™..."
  },
  // ... å…¶ä»–å­—æ®µ
}
```

## ğŸ› ï¸ å¯ç”¨å‘½ä»¤

```bash
# ç”Ÿæˆç¿»è¯‘æ–‡ä»¶å’Œç±»å‹
npm run i18n:generate

# å¼€å‘ï¼ˆä¼šè‡ªåŠ¨ç›‘å¬æ›´æ”¹ï¼‰
npm run dev

# æ„å»ºï¼ˆä¼šå…ˆè¿è¡Œ i18n:generateï¼‰
npm run build
```

## ğŸ“Š å½“å‰çŠ¶æ€

### UI æ–‡æ¡ˆ
- âœ… 102 ä¸ªç¿»è¯‘é”®å·²è¿ç§»åˆ° CSV
- âœ… è‡ªåŠ¨ç”Ÿæˆ JSON + TypeScript ç±»å‹
- âœ… ç±»å‹å®‰å…¨çš„ useI18n hook
- â³ éœ€è¦è¿ç§»å…¶ä½™ç»„ä»¶

### æ˜“ç»å†…å®¹
- âœ… åŒè¯­å†…å®¹ç±»å‹å®šä¹‰
- âœ… å‰ 3 å¦ç¤ºä¾‹å®Œæˆ
- â³ éœ€è¦è¿ç§»å…¶ä½™ 61 å¦

## ğŸ”œ åç»­å·¥ä½œ

### çŸ­æœŸï¼ˆç«‹å³ï¼‰
1. âœ… åˆ›å»º translations.csv
2. âœ… ç¼–å†™ç”Ÿæˆè„šæœ¬
3. âœ… åˆ›å»º useI18n hook
4. â³ è¿ç§»æ‰€æœ‰ç»„ä»¶ä½¿ç”¨æ–°ç³»ç»Ÿ

### ä¸­æœŸ
1. â³ è¿ç§»æ‰€æœ‰ 64 å¦åˆ°åŒè¯­ç»“æ„
2. â³ åˆ é™¤æ—§çš„ i18n æ–‡ä»¶
3. â³ æ·»åŠ ç¿»è¯‘éªŒè¯è„šæœ¬

### é•¿æœŸï¼ˆå¯é€‰ï¼‰
1. â¬œ æ·»åŠ ç¿»è¯‘è¦†ç›–ç‡æŠ¥å‘Š
2. â¬œ CI/CD é›†æˆç¿»è¯‘æ£€æŸ¥
3. â¬œ æ”¯æŒæ›´å¤šè¯­è¨€

## ğŸ¤ åä½œæŒ‡å—

### å¯¹äºå¼€å‘è€…
- ç¼–è¾‘ `translations.csv` æ·»åŠ  UI æ–‡æ¡ˆ
- ç¼–è¾‘ `content/hexagrams.ts` æ·»åŠ å¦è±¡å†…å®¹
- è¿è¡Œ `npm run i18n:generate` ç”Ÿæˆæ–‡ä»¶
- ä½¿ç”¨ `useI18n()` hookï¼ˆæœ‰è‡ªåŠ¨è¡¥å…¨ï¼‰

### å¯¹äºç¿»è¯‘äººå‘˜
- ç¼–è¾‘ `translations.csv`ï¼ˆå¯ä»¥ç”¨ Excelï¼‰
- ä¸­æ–‡åˆ—ä¿®æ”¹å³å¯ï¼Œæ— éœ€æ‡‚ä»£ç 
- æäº¤ CSV æ–‡ä»¶ï¼Œå¼€å‘è€…ä¼šç”Ÿæˆ JSON

### å¯¹äºæ˜“ç»å†…å®¹ç¼–è¾‘
- ç¼–è¾‘ `content/hexagrams.ts`
- è‹±æ–‡å’Œä¸­æ–‡éƒ½åœ¨åŒä¸€ä¸ªå¯¹è±¡é‡Œ
- å¯ä»¥å•ç‹¬æ¶¦è‰²æŸä¸ªè¯­è¨€ç‰ˆæœ¬

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸è¦æ‰‹åŠ¨ç¼–è¾‘ generated/ ç›®å½•**
   - è¿™äº›æ–‡ä»¶æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„
   - ä½ çš„æ›´æ”¹ä¼šè¢«è¦†ç›–

2. **CSV æ˜¯ UI æ–‡æ¡ˆçš„å”¯ä¸€æº**
   - æ‰€æœ‰ UI æ–‡æ¡ˆä¿®æ”¹éƒ½åœ¨ CSV é‡Œ
   - ä¸è¦ç›´æ¥æ”¹ JSON

3. **æ˜“ç»å†…å®¹ä¸ç”¨ CSV**
   - é•¿æ–‡æœ¬ã€åµŒå¥—ç»“æ„
   - ç›´æ¥ç¼–è¾‘ TS æ–‡ä»¶

4. **æ„å»ºå‰ä¼šè‡ªåŠ¨ç”Ÿæˆ**
   - `prebuild` è„šæœ¬è‡ªåŠ¨è¿è¡Œ
   - ç¡®ä¿ç”Ÿäº§ç¯å¢ƒä½¿ç”¨æœ€æ–°ç¿»è¯‘

## ğŸ“ å­¦ä¹ èµ„æº

- [react-i18next æ–‡æ¡£](https://react.i18next.com/)
- [PapaParse (CSV è§£æ)](https://www.papaparse.com/)
- [TypeScript ç±»å‹ç³»ç»Ÿ](https://www.typescriptlang.org/docs/handbook/2/types-from-types.html)

---

**æ›´æ–°æ—¶é—´**: 2025-11-20  
**æ¶æ„å¸ˆ**: AI Assistant + User  
**çŠ¶æ€**: âœ… åŸºç¡€æ¶æ„å®Œæˆï¼Œé€æ­¥è¿ç§»ä¸­

